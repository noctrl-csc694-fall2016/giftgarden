<!-- 3. Footer at bottom... it's sticky -->
<div class="pre-footer">&nbsp;</div>
<footer class="footer">
  <div class="container">
    <div class="footer-text">
      <div class="col-xs-6">
        &copy; 2016
      </div>
      <div class="col-xs-1 text-right">
        <% if logged_in? %>
        <%= link_to "Home",    home_path %>
        <% else %>
        <%= link_to "Login",   root_path %>
        <% end %>
      </div>
      <div class="col-xs-1 text-right">
        <%= link_to "About",    about_path %>
      </div>
      <div class="col-xs-1 text-right">
        <%= link_to "Help",    help_path %>
      </div>
    </div>
  </div>
</footer>
<script>
  $(document).ready(function(){
    /* Shorten the banner on scroll */
    $(window).scroll(function() {
      var x = $(window).scrollTop();
      if (x >= 60) {
        $(".navbar-brand-image").hide();
        $( ".navbar-brand-text" ).replaceWith( "<h1 class=\"navbar-brand-text\">Gift Garden</h1>" );
        $(".navbar-donna").css("height", "68px");
        $(".navbar-donna").css("padding-top", "8px");
        $(".navbar-donna-brand").css("padding", "0px");
        $(".navbar-donna-search").css("margin-top", "5px");
      } else {
        $(".navbar-brand-image").show();
        $( ".navbar-brand-text" ).replaceWith( "<h1 class=\"navbar-brand-text\">Gift<span class=\"line-break\">Garden</span></h1>" );
        $(".navbar-donna").css("height", "");
        $(".navbar-donna").css("padding-top", "");
        $(".navbar-donna-brand").css("padding", "");
        $(".navbar-donna-search").css("margin-top", "");
      }
    });
    
    /* Bottom Align Specific Tags 
    (http://stackoverflow.com/questions/13841387/how-do-i-bottom-align-grid-elements-in-bootstrap-fluid-layout)
    */
    //for each element that is classed as 'pull-down', set its margin-top to the difference between its own height and the height of its parent
    $('.vertical-align-bottom').each(function() {
      var $this = $(this);
      $this.css('margin-top', $this.parent().height() - $this.height())
    });
    
    /* Adds Tooltip */
    /* (Pat M) this was throwing a console error, so I commented out for now */ 
    //$('[data-toggle="tooltip"]').tooltip();
    
    /*
    This Javascript function enables hyperlink selection of an entire row
    My source for this is my class last term, CSC 495:
    https://github.com/noctrl-csc495-spring2016/Odyssey495/blob/master/app/views/layouts/_footer.html.erb
    */
    $("tr[data-link]").click(function() {
      window.location = this.dataset.link
    })
    
    // Replace Icons
  	$('.collapse').on('shown.bs.collapse', function(){
      $(this).parent().find(".glyphicon-plus").removeClass("glyphicon-plus").addClass("glyphicon-minus");
    }).on('hidden.bs.collapse', function(){
      $(this).parent().find(".glyphicon-minus").removeClass("glyphicon-minus").addClass("glyphicon-plus");
    });
  });
  
  // Donor Search Return
  function fetchDonorValue(){
    window.open('<%= hyper_surf_donors_path %>','Hyper Surf Donors','toolbar=no,location=no,menubar=no,scrollbars=yes,resizable=no');
  };
    
  // Return Info
  function returnDonorValue(rowSelected) { 
    window.opener.document.getElementById('gift_donor_id').value = rowSelected;
    window.close();
  }; 
  
  // Activity Search Return
  function fetchActivityValue(){
    window.open('<%= hyper_surf_activities_path %>','Hyper Surf Activities','toolbar=no,location=no,menubar=no,scrollbars=yes,resizable=no');
  };
    
  // Return Info
  function returnActivityValue(rowSelected) { 
    window.opener.document.getElementById('gift_activity_id').value = rowSelected;
    window.close();
  };
</script>

